let pokemonRepository=function(){let e=[];function t(){return e}function n(){document.getElementById("loading-message").style.display="block"}function o(){document.getElementById("loading-message").style.display="none"}function i(e){pokemonRepository.loadDetails(e).then(function(){let t=document.querySelector("#pokemonModalLabel"),n=document.querySelector(".pokemon-image-front"),o=document.querySelector(".pokemon-image-back"),i=document.querySelector(".pokemon-height"),a=document.querySelector(".pokemon-weight"),l=document.querySelector(".pokemon-types"),r=document.querySelector(".pokemon-abilities"),s=document.querySelector(".pokemon-id");t.innerText=e.name,n.src=e.imageUrlFront,o.src=e.imageUrlBack,i.innerText="Height: "+e.height,a.innerText="Weight: "+e.weight,l.innerText="Types: "+e.types.join(", "),r.innerText="Abilities: "+e.abilities.join(", "),s.innerText="Pokemon #: "+e.id,$("#pokemonModal").modal("show")})}return window.addEventListener("keydown",e=>{"Escape"===e.key&&modalContainer.classList.contains("is-visible")&&hideModal()}),{getAll:t,add:function t(n){"object"==typeof n&&"name"in n&&"detailsUrl"in n?e.push(n):console.log("Incorrect Pokemon")},addListItem:function e(t){let n=document.querySelector(".pokemon-list"),o=document.createElement("li");o.classList.add("list-group-item");let a=document.createElement("img");a.classList.add("img"),a.src=t.imageUrlFront,a.alt="Image of "+t.name;let l=document.createElement("button");l.innerText=t.name,l.classList.add("button-class"),l.classList.add("btn"),l.setAttribute("data-toggle","modal"),o.appendChild(a),o.appendChild(l),n.appendChild(o),function e(t,n){t.addEventListener("click",function(e){e.preventDefault(),i(n)})}(l,t)},loadList:function e(){return n(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){return Promise.all(e.results.map(function(e){let t={name:e.name,detailsUrl:e.url};return pokemonRepository.loadDetails(t).then(function(){pokemonRepository.add(t),pokemonRepository.addListItem(t)})}))}).catch(function(e){console.error(e)}).then(function(){o()})},loadDetails:function e(t){return n(),fetch(t.detailsUrl).then(function(e){return e.json()}).then(function(e){t.imageUrlFront=e.sprites.front_default,t.imageUrlBack=e.sprites.back_default,t.height=e.height,t.weight=e.weight,t.id=e.id,t.types=[],e.types.forEach(function(e){t.types.push(e.type.name)}),t.abilities=[],e.abilities.forEach(function(e){t.abilities.push(e.ability.name)})}).catch(function(e){console.error(e)}).then(function(){o()})},showDetails:i}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});